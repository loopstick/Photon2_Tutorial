## Hands-on Photon2 Tutorial

**This tutorial created by Sudhu Tewari 2023**
 - from materials originally created by: Michael Shiloh and Judy Castro for *Teach Me To Make*

#### Tutorial overview
The tutorial will focus on getting you up and running with Particle Photon2 quickly, so that you will understand the basic procedures for working with your [Particle Photon2](https://docs.particle.io/photon-2/)

We will cover how to connect your Photon2 to your laptop; how to understand, modify, and write programs (aka code); how to connect input devices and sensors to your Photon2 and read them from a program; and how to connect actuators (LEDs, motors, speakers) and control them from a program. Other topics will be covered as interest dictates and time permits.

***
#### What is the Photon2 anyway?
 - Read about the Photon2: https://docs.particle.io/reference/datasheets/wi-fi/photon-2-datasheet/#functional-description

 - Photon2 GPIO pins and ports: https://docs.particle.io/reference/datasheets/wi-fi/photon-2-datasheet/#pin-markings
 ![photon-2-pinout](/images/photon-2-pinout.svg)

- Getting Started Dashboard: https://docs.particle.io/getting-started/getting-started/
***
### Start Here

<!--- - Install IDE~  -->

#### Initial Set Up (first time only)
- Follow the steps at [setup.particle.io](https://setup.particle.io/)
  to get your Photon2 set up

#### Configure Wi-Fi (do this at home)
- in order to do anything with your Photon2 must be connected to wifi
  - This isn't totally true, you _can_ work with the Photon2 not connected to Wi-Fi _BUT_ it's a bit complicated and we're aiming for simple and easy in this tutorial.
  - luckily Particle has made it easy to configure wifi for Photon2
- Navigate to [Particle Configure Wi-Fi](https://docs.particle.io/tools/developer-tools/configure-wi-fi/) page
<!--  [UC Berkeley Wi-Fi Portal](https://portal.berkeley.edu/people/wifi_access) -->
  - follow the prompts to enter your wifi credentials
     - Wi-Fi Network name
     - password

### Configure Photon 2 to connect with Cal IoT Wi-Fi (Do this at home -> required to use your Photon2 on campus)
- In order to use Cal Wi-Fi with our Photons we must register our device with the Berkeley IoT Wi-Fi network (using its MAC address)
- In order to register the device we must first obtain the MAC address of our device

#### Get Mac Address (-> do this at home)
- The code below asks the device to print its own MAC address (to serial):
- First we need to flash the code to our device.
- go here -> [GetMacAddress.ino](https://go.particle.io/shared_apps/6507d59801c67400099a4ce3) (right-click: Open Link in New Tab)

![WebIDE_01](/images/WebIDE_01.png)
<!--  We 'll use the Particle Web IDE [https://build.particle.io/](https://build.particle.io/build/new) to flash this code  our device. 
-->
- You should see your device name in the lower right of the Web IDE window

![WebIDE_01_Device](/images/WebIDE_01_Device.png)

- Click on the lightning bolt icon to flash the code to your device

![WebIDE_01_Flash](/images/WebIDE_01_Flash.png)
- you should see some evidence of activity.
  - you'll see a spinning arrow animation where the lightnining bolt was
  - the RGB LED on your Photon 2 will blink various colors
  - text at the bottom of the screen will let you know if the flash is successful
- When the activity stops you should see the word ```Ready.``` at the bottom of the screen
- It's working!!
  - but why can't we see anything happening?
- Use the [Particle USB serial debug log](https://docs.particle.io/tools/developer-tools/usb-serial/) to monitor the serial output. (right-click: Open Link in New Tab)
- BAM! There's your device's MAC address
- ```XX:XX:XX:XX:XX:XX```
  
<!-- ![USBserialLog_MACaddress2](/images/USBserialLog_MACaddress2.png)--> 
- Copy this address!!

#### Register MAC Address with Berkeley IoT Wi-Fi (-> do this anywhere)
- Navigate to the [UC Berkeley Wi-Fi Portal](https://portal.berkeley.edu/people/wifi_access)
- under "Berkeley-IoT Wi-Fi Network Devices" click on Manage devices
- click ```Create New```
- enter in the MAC address you copied in the earlier steps
- issue the device a name
- copy your Berkeley-IoT password somewhere SAFE so that you will remember it!

#### Connect Photon2 Berkeley IoT Wi-Fi (-> do this on campus)
- Navigate to: https://docs.particle.io/tools/developer-tools/configure-wi-fi/
  - follow the prompts to enter your wifi credentials
     - Wi-Fi network name (Berkeley-IoT)
     - Berkeley-IoT password (generated by UC Berkeley portal in the previous step)'

       
***
### Alternate methods of connecting to Wi-Fi exist! 
- Install VSCode: [TDF-Software: Installing](https://github.com/Berkeley-MDes/desinv-202/wiki/TDF-Software:-Installing)
- Connect to Berkeley IoT Wi-Fi: [Particle: connecting a Photon 2 to the UCB IoT network](https://github.com/Berkeley-MDes/desinv-202/wiki/Particle:-connecting-a-Photon-2-to-the-UCB-IoT-network)

****
### Connected to Berkeley IoT Wi-Fi? Let's continue!

- To keep things simple we'll begin writing code (apps) in the [Particle Web IDE](https://build.particle.io/build/new)

- Later on we'll use VSCode to get into the really fun stuff.


### Hello world -> Is this thing  on?
- Copy the code below into a new app or 
- navigate to this page: [HelloWorld.ino](https://go.particle.io/shared_apps/6507e44623d6c200096a1253)
```
/*
  Hello World
  A "Hello, World!" program generally is a computer program that
	outputs or displays the message "Hello, World!".
	Such a program is very simple in most programming languages,
	and is often used to illustrate the basic syntax of a programming language.
	It is often the first program written by people learning to code
*/

void setup() {
    //initialize serial communications
    Serial.begin();
}

void loop() {
    //send 'Hello, world!' over the serial port
    Serial.println("hello World");
    //wait 1 second between messages so we don't drive ourselves crazy
    delay(1000); 
```

- The Serial commands asks the Photon2 to send a message to your laptop. In order to see this message you'll need to use the [Particle USB serial debug log](https://docs.particle.io/tools/developer-tools/usb-serial/) to monitor the serial output. (right-click: Open Link in New Tab)

  - a little code anatomy:

   - the ``setup()`` function is called when a sketch starts.
     - Use it to initialize variables, pin modes, start using libraries, etc.
     - The ``setup()`` function will only run once, after each powerup or reset of the Photon2 microcontroller.

  - The ``loop()`` function does precisely what its name suggests, and loops consecutively through your list of instructions.
    - Photon2 only executes one instruction at a time.
  - ``//`` indicates a comment line meant for humans to read but ignored by the compiler that turn this text into machine code.
    - code editors will recognize this and format the text accordingly

- More on specific functions and variables soon! Let's make something happen in the real world first.

 
***
## BLINK

***
### Connecting to your Microcontroller - Pinouts
In order to connect inputs or outputs to your microcontroller you need to know where the GPIO (general-purpose input/output) pins are!

 - {Photon2 GPIO pins and ports}(https://docs.particle.io/reference/datasheets/wi-fi/photon-2-datasheet/#pin-markings)

   
 ![photon-2-pinout](/images/photon-2-pinout.svg)


***
### Using a solderless Breadboard to connect your microcontroller to other things (LEDs, motors, speakers, sensors, etc.)
In order to connect inputs or outputs to your microcontroller you need to have a way of making electrical connections!

The Solderless Breadboard
- [How to use a Breadboard tutorial](https://learn.sparkfun.com/tutorials/how-to-use-a-breadboard)
- [Breadboard connections](http://wiring.org.co/learning/tutorials/breadboard/)

![Breadboard](/images/Breadboard_st.jpg)

![Breadboard underside](/images/BreadboardUnderside_st.jpg)


Use the breadboard to add an external LED.
- LEDs must always be used with resistors so they don’t burn out.
  - The resistor value can be anywhere from 100 ohm to 1k ohm.
    - The lower the resistance, the brighter the light.
    - Evil Mad Scientist explains it well [here](https://www.evilmadscientist.com/2012/resistors-for-leds/)
  - Resistor Color Code!
    - [Learn the Resistor Color Code in in 5 minutes](http://www.resistorguide.com/resistor-color-code/)

    ![ResistorColorCode](/images/ResistorColorCode.png)

- LEDs are polarized
  - [identifying LED polarity](https://www.youtube.com/watch?v=SRDgNR_yCms)

  ![led_example](/images/led_example.png)


Here’s a picture showing how to connect the LED and resistor on the breadboard:

![Photon2_LED](/images/Photon2_LED.jpg)

Here is another view of this circuit:

![Photon2_LED_bb2](/images/Photon2_LED_bb2.png)


